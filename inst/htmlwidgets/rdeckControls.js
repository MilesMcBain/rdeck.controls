!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rdeckControls=t():e.rdeckControls=t()}(self,(function(){return(()=>{"use strict";var e={};function t({targetRdeckId:e,layerNames:t,layerGroupNames:r,initialSelection:o}){if(Array.isArray(o))throw Error("rdeckControls dropdown layer control cannot take an array of layer or group names.");const n=t.map((e=>({name:e,visible:!1}))).concat(r.map((e=>({groupName:e,visible:!1})))),a=(l=o,(c=t.concat(r)).length-(c.reverse().lastIndexOf(l)+1));var c,l;const d=[(i=n)[u=a]].concat(i.filter(((e,t)=>t!==u)));var i,u;d[1].visible=!0;const s=document.createElement("select"),p=d.map((e=>{const t=document.createElement("option");return"groupName"in e?(t.value=e.groupName,t.innerText=e.groupName,t.nameType="groupName"):(t.value=e.name,t.innerText=e.name,t.nameType="name"),t}));var m,y;return s.append(...p),s.id=`${e}_layerDropdownControl`,s.onselectionchange=(m=s.id,y=e,()=>{const e=document.getElementById(m);if(null===e)throw Error(`rdeckControls couldn't find the control elment by Id: ${m}`);const t=e.value,r=Array.from(e.children).filter((e=>"OPTION"===e.tagName.toUpperCase())).map((e=>{const r={};return r.visible=e.value===t,"groupName"===e.nameType?r.groupName=e.value:r.name=e.value,r})),o=rdeck.getWidgetById(y);if(null===o)throw Error(`rdeckControls couldn't find the rdeck instance by Id: ${y}`);o.setLayerVisibility(r)}),s}return(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e),HTMLWidgets.widget({name:"rdeckControls",type:"output",factory:function(e,r,o){return{renderValue:function(r){var o;switch(r.controlType){case"dropdown":o=t;break;default:throw"rdeckControls recieved an unknown control type: {x.controlType}"}const n=o({targetRdeckId:r.targetRdeckId,...r.controlData});e.appendChild(n)},resize:function(e,t){}}}}),e})()}));